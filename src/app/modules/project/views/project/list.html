<h2>Personnages du projet « {{ @project.title }} »</h2>

<p><a class="button" href="{{ @base }}/project/{{ @project.id }}" title="Retour au projet"><i

            class="fas fa-arrow-left"></i></a></p>

<p><a class="button" href="{{ @base }}/project/{{ @project.id }}/character/create" title="Ajouter un personnage"><i

            class="fas fa-plus"></i></a></p>

<check if="{{ empty(@characters) }}">

    <true>

        <p>Aucun personnage pour ce projet.</p>

    </true>

    <false>

        <table>

            <thead>

                <tr>

                    <th>Nom</th>

                    <th>Description</th>

                    <th>Actions</th>

                </tr>

            </thead>

            <tbody>

                <repeat group="{{ @characters }}" value="{{ @char }}">

                    <tr>

                        <td>{{ @char.name }}</td>

                        <td>{{ nl2br(@char.description) }}</td>

                        <td>

                            <a class="button" href="{{ @base }}/character/{{ @char.id }}/edit" title="Modifier"><i

                                    class="fas fa-edit"></i></a>

                            <a class="button delete js-confirm" href="{{ @base }}/character/{{ @char.id }}/delete"

                                data-confirm="Supprimer ce personnage ?" title="Supprimer"><i

                                    class="fas fa-trash"></i></a>

                        </td>

                    </tr>

                </repeat>

            </tbody>

        </table>

    </false>

</check>

<script nonce="{{ @nonce }}">

    document.addEventListener('DOMContentLoaded', function () {

        document.querySelectorAll('.js-confirm').forEach(function (el) {

            el.addEventListener('click', function (e) {

                if (!confirm(this.dataset.confirm || 'Confirmer ?')) {

                    e.preventDefault();

                }

            });

        });

    });

</script>