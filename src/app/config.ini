[globals]
DEBUG=0
UI=app/modules/auth/views/|app/modules/chapter/views/|app/modules/project/views/|app/modules/section/views/|app/modules/note/views/|app/modules/acts/views/|app/modules/characters/views/|app/modules/ai/views/|app/modules/lecture/views/|app/modules/element/views/|app/modules/template/views/|app/modules/search/views/|app/modules/stats/views/|app/modules/share/views/|app/modules/collab/views/
AUTOLOAD=app/controllers/|app/modules/auth/controllers/|app/modules/auth/models/|app/modules/chapter/controllers/|app/modules/chapter/models/|app/modules/project/controllers/|app/modules/project/models/|app/modules/section/controllers/|app/modules/section/models/|app/modules/note/controllers/|app/modules/note/models/|app/modules/acts/controllers/|app/modules/acts/models/|app/modules/characters/controllers/|app/modules/characters/models/|app/modules/ai/controllers/|app/modules/ai/models/|app/modules/lecture/controllers/|app/modules/element/controllers/|app/modules/element/models/|app/modules/template/controllers/|app/modules/template/models/|app/modules/search/controllers/|app/modules/stats/controllers/|app/modules/share/controllers/|app/modules/share/models/|app/modules/collab/controllers/
SESSION_DOMAIN=
; Database configuration - VALUES LOADED FROM .env FILE
; For security, credentials are stored in .env (not committed to git)
; Fallback values below (override in production .env)
db_host=localhost
db_name=ecrivain
db_user=root
db_pass=
db_port=3306
    
[routes]
; Home
GET /=AuthController->login
GET /index.php=AuthController->login

; Auth
GET /login=AuthController->login
POST /login=AuthController->authenticate
GET /register=AuthController->register
POST /register=AuthController->store
GET /password/forgot=AuthController->forgotPassword
POST /password/forgot=AuthController->requestPasswordReset
GET /password/reset/@token=AuthController->showPasswordResetForm
POST /password/reset/@token=AuthController->performPasswordReset
GET /logout=AuthController->logout
GET /auth/tokens=AuthController->listTokens
POST /auth/token/generate=AuthController->generateToken
POST /auth/token/revoke=AuthController->revokeTokens

; Profile
GET /profile=ProfileController->index
POST /profile=ProfileController->update
GET /profile/photo/@username=ProfileController->photo

; Dashboard & Projects
GET /dashboard=ProjectController->dashboard
GET /project=ProjectController->dashboard
GET /project/create=ProjectController->create
POST /project/create=ProjectController->store
GET /project/@id=ProjectController->show
GET /project/@id/edit=ProjectController->edit
POST /project/@id/edit=ProjectController->update
GET /project/@id/delete=ProjectController->delete
GET /project/@id/mindmap=ProjectMindmapController->mindmap
GET /project/@id/cover=ProjectController->cover
GET /project/@id/export=ProjectExportController->export
GET /project/@id/export/html=ProjectExportController->exportHtml
GET /project/@id/export/epub=ProjectExportController->exportEpub
GET /project/@id/export/vector=ProjectExportController->exportVector
GET /project/@id/export/clean=ProjectExportController->exportClean
GET /project/@id/export/summaries=ProjectExportController->exportSummaries
GET /project/@id/export/markdown=ProjectExportController->exportMarkdown

; Lecture (Reading Mode)
GET /project/@id/lecture=LectureController->read
POST /lecture/add-comment=LectureController->addComment
POST /lecture/save-bookmark=LectureController->saveBookmark
GET /lecture/get-bookmark=LectureController->getBookmark
GET /project/@id/relecture=ReviewController->review
GET /project/@id/relecture/rapport=ReviewController->report
POST /relecture/annotation/add=ReviewController->addAnnotation
POST /relecture/annotation/@aid/delete=ReviewController->deleteAnnotation

; Acts
GET /project/@pid/act/create=ActController->create
POST /project/@pid/act/create=ActController->store
GET /act/@id/edit=ActController->edit
POST /act/@id/edit=ActController->update
GET /act/@id/delete=ActController->delete

; Chapters
GET /project/@pid/chapter/create=ChapterController->create
POST /project/@pid/chapter/create=ChapterController->store
GET /chapter/@id=ChapterController->show
POST /chapter/@id/save=ChapterController->update
POST /chapter/@id/comment=ChapterController->comment
GET /chapter/@id/comments=ChapterController->getComments
GET /synonyms/@word=ChapterController->synonyms
GET /chapter/@id/delete=ChapterController->delete
GET /chapter/@id/versions=ChapterController->versions
POST /chapter/@id/restore/@vid=ChapterController->restore

; Elements (Custom Template Elements)
GET /project/@pid/element/create=ElementController->create
POST /project/@pid/element/create=ElementController->store
GET /element/@id=ElementController->show
POST /element/@id/save=ElementController->update
GET /element/@id/delete=ElementController->delete

; Sections
GET /project/@pid/section/@type=SectionController->edit
POST /project/@pid/section/@type=SectionController->save
GET /section/@id/delete=SectionController->delete
GET /project/@pid/section/@type/image=SectionController->image
POST /project/@pid/section/@type/image/delete=SectionController->deleteImage

; Notes
GET /project/@pid/note/edit=NoteController->edit
POST /project/@pid/note/save=NoteController->save
GET /note/@id/delete=NoteController->delete

; Characters
GET /project/@pid/characters=CharacterController->index
GET /project/@pid/character/create=CharacterController->create
POST /project/@pid/character/create=CharacterController->store
GET /character/@id/edit=CharacterController->edit
POST /character/@id/edit=CharacterController->update
GET /character/@id/delete=CharacterController->delete

; AJAX & Utilities
POST /project/@pid/chapters/reorder=ProjectContentController->reorderChapters
POST /project/@pid/sections/reorder=ProjectContentController->reorderSections
POST /project/@pid/export-toggle=ProjectContentController->toggleExport
POST /project/@id/reorder-item=ProjectContentController->reorderItem
GET /project/@pid/preview/@type/@id=ProjectContentController->getPreview
POST /theme=ProjectController->setTheme

; Project dictionary (grammar checker)
POST /project/@pid/dictionary/add=ProjectDictionaryController->dictionaryAdd
POST /project/@pid/dictionary/remove=ProjectDictionaryController->dictionaryRemove

; Project Files
POST /project/@pid/file/upload=ProjectFileController->uploadFile
GET /project/@pid/file/@fid/download=ProjectFileController->downloadFile
GET /project/@pid/file/@fid/delete=ProjectFileController->deleteFile

; Templates
GET /templates=TemplateController->index
GET /template/create=TemplateController->create
POST /template/create=TemplateController->store
GET /template/import=TemplateController->importJson
POST /template/import=TemplateController->importJson
GET /template/@id/edit=TemplateController->edit
POST /template/@id/edit=TemplateController->update
GET /template/@id/delete=TemplateController->delete
GET /template/@id/export=TemplateController->exportJson
POST /template/@id/element/add=TemplateController->addElement
POST /template/@id/element/@eid/delete=TemplateController->deleteElement
POST /template/@id/element/@eid/update=TemplateController->updateElement
POST /template/@id/reorder=TemplateController->reorder
POST /template/@id/promote=TemplateController->promoteToSystem

; Share — management (authenticated)
GET /share=ShareManageController->index
GET /share/create=ShareManageController->create
POST /share/create=ShareManageController->create
GET /share/@id/edit=ShareManageController->edit
POST /share/@id/edit=ShareManageController->edit
POST /share/@id/toggle=ShareManageController->toggle
POST /share/@id/delete=ShareManageController->delete

; Share — public (no auth required)
GET /s/@token=SharePublicController->index
GET /s/@token/@pid=SharePublicController->project
GET /s/@token/@pid/mindmap=SharePublicController->mindmap
GET /s/@token/@pid/lecture=SharePublicController->lecture
GET /s/@token/@pid/relecture=SharePublicController->relecture

; Collaboration — invitations (propriétaire)
GET  /project/@pid/collaborateurs=CollabInviteController->index
POST /project/@pid/collaborateurs/invite=CollabInviteController->invite
POST /project/@pid/collaborateurs/@uid/remove=CollabInviteController->remove

; Collaboration — invitations reçues (collaborateur)
GET  /collab/invitations=CollabInviteController->myInvitations
POST /collab/invitation/@id/accept=CollabInviteController->accept
POST /collab/invitation/@id/decline=CollabInviteController->decline

; Collaboration — demandes (collaborateur)
POST /project/@pid/collab/request/add=CollabRequestController->submit
GET  /project/@pid/collab/mes-demandes=CollabRequestController->myRequests
POST /collab/request/@rid/cancel=CollabRequestController->cancel

; Collaboration — revue des demandes (propriétaire)
GET  /project/@pid/collab/demandes=CollabRequestController->ownerQueue
POST /collab/request/@rid/approve=CollabRequestController->approve
POST /collab/request/@rid/reject=CollabRequestController->reject

; Search
GET /search=SearchController->search

; Writing stats
GET /stats=StatsController->index
GET /project/@pid/stats=StatsController->index
GET /stats/@pid=StatsController->index

; AI Usage
GET /ai/usage=AiController->usage
POST /ai/usage/log=AiController->logUsage
POST /ai/generate=AiController->generate
GET /ai/synonyms/@word=AiController->synonyms
GET /ai/config=AiController->config
POST /ai/config=AiController->saveConfig
POST /ai/summarize-chapter=AiController->summarizeChapter
POST /ai/summarize-act=AiController->summarizeAct
POST /ai/ask=AiController->ask
